{"version":3,"sources":["markdown.js","containers/Map/index.js","containers/Tabs/AddNewMarker.js","containers/Tabs/AllMarkers.js","api/firebase.js","containers/Tabs/SignIn.js","api/index.js","App.js","index.js","containers/Map/map.jpg"],"names":["mdParser","MarkdownIt","bounds","Math","round","React","memo","onMapClick","markers","newMarkerPosition","Map","id","crs","L","CRS","Simple","maxZoom","zoom","center","style","height","width","onClick","ImageOverlay","url","chultMap","map","marker","Marker","key","position","Popup","dangerouslySetInnerHTML","__html","render","description","opacity","onSubmit","onClear","useState","newMarkerDescription","setNMD","handleDescriptionChange","useCallback","text","display","flexDirection","className","value","renderHTML","onChange","onDelete","onEdit","hoveredMarker","setHM","markerToEdit","setMTE","search","setSearch","handleDelete","handleEdit","markersToShow","filter","toLowerCase","includes","type","e","target","idx","inEditMode","onMouseEnter","onMouseLeave","justifyContent","marginLeft","margin","marginBottom","length","firebaseAppAuth","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","auth","providers","googleProvider","GoogleAuthProvider","createComponentWithAuth","withFirebaseAuth","DB","loading","user","signOut","signInWithGoogle","displayName","storeMarker","a","collection","add","console","error","alert","deleteMarker","markerFID","doc","delete","fetchMarkers","get","querySnapshot","forEach","entity","data","push","fid","log","editMarker","update","navigation","title","tab","setTab","setMarkers","setNMP","useEffect","unsubscribe","onSnapshot","snapshot","markersFromDB","parseMarkers","handleMapClick","mapEvent","latlng","handleClearNewMarker","onAddMarker","newMarker","Date","now","nmToStore","lat","lng","then","onDeleteMarker","window","confirm","onEditMarker","route","ReactDOM","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.ea40f66b.chunk.js","sourcesContent":["import MarkdownIt from 'markdown-it'\n\nconst mdParser = new MarkdownIt(/* Markdown-it options */);\n\nexport default mdParser","import React from 'react';\nimport { Map, ImageOverlay, Marker, Popup } from 'react-leaflet'\nimport L from 'leaflet'\n\nimport mdParser from '../../markdown'\n\nimport chultMap from './map.jpg'\n\n\n//const bounds = [[0, 0], [Math.round(1499 * 0.8), Math.round(1107 * 0.8)]];\nconst bounds = [[0, 0], [Math.round(825 * 0.8), Math.round(1100 * 0.8)]];\n\nfunction ChultMap({ onMapClick, markers, newMarkerPosition }) {\n\n  return (\n    <Map\n      id=\"map\"\n      crs={L.CRS.Simple}\n      maxZoom={24}\n      zoom={0}\n      center={[700, 400]}\n      style={{ height: '100vh', width: '50vw' }}\n      onClick={onMapClick}\n    // onViewportChange={e => {\n    //   debugger\n    // }}\n    >\n      <ImageOverlay url={chultMap} bounds={bounds} />\n\n      {\n        markers.map(marker =>\n          <Marker\n            key={marker.id}\n            position={marker.position}\n          >\n            <Popup>\n              <div dangerouslySetInnerHTML={{ __html: mdParser.render(marker.description) }} />\n            </Popup>\n          </Marker>\n        )\n      }\n\n      <Marker\n        opacity={newMarkerPosition ? 1 : 0}\n        position={newMarkerPosition ? newMarkerPosition : [-10000, -1000]}\n      />\n    </Map>\n  )\n}\n\nexport default React.memo(ChultMap)\n","import React, { useState, useCallback } from 'react';\nimport MdEditor from 'react-markdown-editor-lite'\n\nimport mdParser from '../../markdown'\n\n\nfunction AddNewMarker({ onSubmit, onClear }) {\n  const [newMarkerDescription, setNMD] = useState('')\n\n  const handleDescriptionChange = useCallback(({ text }) => {\n    setNMD(text)\n  }, [])\n\n  const handleSubmit = () => onSubmit({ newMarkerDescription })\n\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column' }}>\n\n      <div style={{ display: 'flex', flexDirection: 'column' }}>\n        <button className=\"btn-back\" onClick={onClear}>Back</button>\n        <h2>New Marker: </h2>\n      </div>\n\n      <MdEditor\n        value=\"\"\n        renderHTML={(text) => mdParser.render(text)}\n        onChange={handleDescriptionChange}\n      />\n\n      <button className=\"btn-new-marker\" onClick={handleSubmit}>Add New Marker</button>\n    </div>\n  )\n}\n\nexport default React.memo(AddNewMarker)","import React, { useState } from 'react'\nimport MdEditor from 'react-markdown-editor-lite'\n\nimport mdParser from '../../markdown'\n\nfunction AllMarkers({ markers, onDelete, onEdit }) {\n  const [hoveredMarker, setHM] = useState(null)\n  const [markerToEdit, setMTE] = useState(null)\n\n  const [search, setSearch] = useState('')\n\n  const handleDelete = marker => () => { onDelete(marker) }\n  const handleEdit = marker => () => {\n    onEdit(marker)\n    setMTE(null)\n  }\n\n  const markersToShow = markers.filter(marker =>\n    marker.description.toLowerCase()\n      .includes(search.toLowerCase())\n  )\n\n  return (\n    <div>\n      <h2>All Markers: </h2>\n\n      <div id=\"search\">\n        <h4>Search: </h4>\n\n        <input\n          type=\"text\"\n          value={search}\n          onChange={e => setSearch(e.target.value)}\n        />\n\n        {\n          search &&\n          <button\n            className=\"btn-dlt\"\n            onClick={() => setSearch('')}\n          >\n            X\n          </button>\n        }\n      </div>\n\n      <div className=\"card-wrapper\">\n\n        {\n          // TODO + 2 because, we always render `newMarker` and array starts from 0\n          hoveredMarker !== null &&\n          <style dangerouslySetInnerHTML={{\n            __html: `\n            .leaflet-marker-icon:nth-child(${hoveredMarker + 2}) {\n              filter:  hue-rotate(425deg)\n            }\n          `}} />\n        }\n\n\n        {\n          markersToShow.map((marker, idx) => {\n            const inEditMode = markerToEdit && markerToEdit.id === marker.id\n\n            return (\n              <div\n                key={marker.id}\n                className=\"marker-card\"\n                onMouseEnter={() => { setHM(idx) }}\n                onMouseLeave={() => { setHM(null) }}\n              >\n\n                <div>\n                  {\n                    inEditMode\n                      ? <MdEditor\n                        value={markerToEdit.description}\n                        renderHTML={(text) => mdParser.render(text)}\n                        onChange={({ text }) => {\n                          setMTE({ ...markerToEdit, description: text })\n                        }\n                        }\n                      />\n                      : <div dangerouslySetInnerHTML={{ __html: mdParser.render(marker.description) }} />\n                  }\n                </div>\n\n                <div style={{ \n                  display: 'flex', \n                  flexDirection: 'column', \n                  justifyContent: 'space-between',\n                  marginLeft: '10px'\n                }}>\n                  <div>\n                    <button\n                      style={{ width: '100%', margin: 0, marginBottom: '5px' }}\n                      className=\"btn-dlt btn-delete\"\n                      onClick={handleDelete(marker)}\n                    >\n                      Delete\n                    </button>\n\n                    <button\n                      style={{ width: '100%', margin: 0 }}\n                      className=\"btn-dlt\"\n                      onClick={() => { setMTE(!inEditMode ? marker : null) }}\n                    >\n                      {!inEditMode ? 'Edit' : 'Back'}\n                    </button>\n                  </div>\n\n                  {\n                    inEditMode &&\n                    <button\n                      style={{ width: '100%', margin: 0 }}\n                      className=\"btn-dlt btn-update\"\n                      onClick={handleEdit(markerToEdit)}\n                    >\n                      Update\n                    </button>\n                  }\n                </div>\n              </div>\n            )\n          })\n        }\n\n        {\n          markersToShow.length === 0 &&\n          <h2>No such markers</h2>\n        }\n\n      </div>\n\n    </div>\n  )\n}\n\nexport default React.memo(AllMarkers)","import * as firebase from 'firebase'\nimport withFirebaseAuth from 'react-with-firebase-auth';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBNrkxhhSw5vp2y9GSVttLGVvDkHeM3SHo\",\n  authDomain: \"temasultera-map.firebaseapp.com\",\n  databaseURL: \"https://temasultera-map.firebaseio.com\",\n  projectId: \"temasultera-map\",\n  storageBucket: \"temasultera-map.appspot.com\",\n  messagingSenderId: \"462358138074\",\n  appId: \"1:462358138074:web:3eddc8459297802250a9e3\",\n  measurementId: \"G-MZHMBVM0RB\"\n};\n\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\n\nconst firebaseAppAuth = firebaseApp.auth();\n\n/** See the signature above to find out the available providers */\nconst providers = {\n  googleProvider: new firebase.auth.GoogleAuthProvider(),\n};\n \n/** Create the FirebaseAuth component wrapper */\nexport const createComponentWithAuth = withFirebaseAuth({\n  providers,\n  firebaseAppAuth,\n});\n\nconst DB = firebase.firestore()\n\nexport default DB\n","import React from 'react'\n\nimport { createComponentWithAuth } from '../../api/firebase'\n\n\nfunction SignIn({ loading, user, signOut, signInWithGoogle }) {\n  return (\n    <div>\n      {\n        loading && <h2>Loading..</h2>\n      }\n\n      {\n        user\n          ? <h1>Hello, {user.displayName}</h1>\n          : <h1>Log in</h1>\n      }\n\n      {\n        user\n          ? <button onClick={signOut}>Sign out</button>\n          : <button onClick={signInWithGoogle}>Sign in with Google</button>\n      }\n    </div>\n  )\n}\n\nexport default createComponentWithAuth(React.memo(SignIn))","import DB from './firebase'\n\nexport const storeMarker = async marker => {\n  try {\n    await DB.collection('markers').add(marker)\n  } catch (e) {\n    console.error(e)\n    alert(e)\n  }\n}\n\nexport const deleteMarker = async markerFID => {\n  try {\n    await DB.collection('markers').doc(markerFID).delete()\n  } catch (e) {\n    console.error(e)\n    alert(e)\n  }\n}\n\nexport const fetchMarkers = async () => {\n  try {\n    const querySnapshot = await DB.collection('markers').get()\n\n    const markers = []\n    querySnapshot.forEach(doc => {\n      const entity = doc.data()\n      markers.push({ fid: doc.id, ...entity })\n    })\n    console.log('MARKERS: ', markers)\n    return markers\n  } catch (e) {\n    console.error(e)\n    alert(e)\n  }\n}\n\nexport const parseMarkers = (querySnapshot) => {\n  try {\n    // const querySnapshot = await DB.collection('markers').get()\n\n    const markers = []\n    querySnapshot.forEach(doc => {\n      const entity = doc.data()\n      markers.push({ fid: doc.id, ...entity })\n    })\n    console.log('MARKERS: ', markers)\n    return markers\n  } catch (e) {\n    console.error(e)\n    alert(e)\n  }\n}\n\nexport const editMarker = async ({ fid, ...marker }) => {\n  try {\n    await DB.collection('markers').doc(fid).update(marker)\n  } catch (e) {\n    console.error(e)\n    alert(e)\n  }\n}","import React, { useState, useEffect, useCallback } from 'react';\n\nimport './App.css'\nimport 'react-markdown-editor-lite/lib/index.css';\n\n\nimport ChultMap from './containers/Map';\nimport AddNewMarker from './containers/Tabs/AddNewMarker';\nimport AllMarkers from './containers/Tabs/AllMarkers';\nimport SignIn from './containers/Tabs/SignIn';\n\nimport {\n  storeMarker,\n  deleteMarker,\n  fetchMarkers,\n  parseMarkers,\n  editMarker,\n} from './api'\nimport DB, { createComponentWithAuth } from './api/firebase'\n\nconst navigation = [\n  {\n    title: 'Markers',\n    tab: 'markers'\n  },\n  {\n    title: 'Sign in',\n    tab: 'sign_in'\n  },\n]\n\nfunction App({ loading, user }) {\n  const [tab, setTab] = useState(navigation[0].tab)\n\n  const [markers, setMarkers] = useState([])\n\n  const [newMarkerPosition, setNMP] = useState(null)\n\n  useEffect(() => {\n    const unsubscribe = DB.collection('markers')\n      .onSnapshot(function (snapshot) {\n        const markersFromDB = parseMarkers(snapshot)\n\n        setMarkers(markersFromDB)\n      }, function (error) {\n        console.error(error)\n      });\n\n    return () => { unsubscribe() }\n  }, [])\n\n  if (!user && tab !== navigation[1].tab)\n    setTab(navigation[1].tab)\n\n  const handleMapClick = useCallback((mapEvent) => {\n    setNMP(mapEvent.latlng)\n  }, [])\n\n  const handleClearNewMarker = useCallback(() => {\n    setNMP(null)\n  }, [])\n\n  const onAddMarker = useCallback(({ newMarkerDescription }) => {\n    const newMarker = {\n      id: Date.now(),\n      description: newMarkerDescription,\n      position: newMarkerPosition\n    }\n\n    setMarkers([...markers, newMarker])\n\n    setNMP(null)\n\n    const nmToStore = { ...newMarker, position: [newMarkerPosition.lat, newMarkerPosition.lng] }\n\n    storeMarker(nmToStore)\n      .then(fetchMarkers)\n      .then(setMarkers)\n  }, [markers, newMarkerPosition])\n\n  const onDeleteMarker = useCallback((marker) => {\n    const isConfirmed = window.confirm('Do you really want to delete this marker?')\n\n    if(isConfirmed) {\n      deleteMarker(marker.fid)\n      .then(fetchMarkers)\n      .then(setMarkers)\n    }\n\n  }, [])\n\n  const onEditMarker = useCallback((marker) => {\n    editMarker(marker)\n    .then(fetchMarkers)\n    .then(setMarkers)\n  }, [])\n\n  if (loading)\n    return <h2>Loading...</h2>\n\n\n  return (\n    <div>\n      <ChultMap\n        onMapClick={handleMapClick}\n        markers={markers}\n        newMarkerPosition={newMarkerPosition}\n      />\n\n      <div id=\"panel\">\n        <div style={{ display: 'flex' }}>\n          {\n            navigation.map(route =>\n              <button\n                key={route.tab}\n                onClick={() => {\n                  setTab(route.tab)\n                  setNMP(null)\n                }}\n              >\n                {route.title}\n              </button>\n            )\n          }\n        </div>\n\n        {\n          user && newMarkerPosition &&\n          <AddNewMarker\n            onSubmit={onAddMarker}\n            onClear={handleClearNewMarker}\n          />\n        }\n\n        {\n          !newMarkerPosition && tab === navigation[0].tab &&\n          <AllMarkers\n            markers={markers}\n            onDelete={onDeleteMarker}\n            onEdit={onEditMarker}\n          />\n        }\n\n        {\n          !newMarkerPosition && tab === navigation[1].tab &&\n          <SignIn />\n        }\n      </div>\n\n    </div >\n\n  );\n}\n\nexport default createComponentWithAuth(App)\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","module.exports = __webpack_public_path__ + \"static/media/map.490c8a8d.jpg\";"],"sourceRoot":""}