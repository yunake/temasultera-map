(this["webpackJsonptemasultera-map"]=this["webpackJsonptemasultera-map"]||[]).push([[0],{130:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(21),l=n.n(c),o=n(16),i=n(50),u=n(12),s=(n(56),n(57),n(134)),m=n(132),d=n(133),p=n(135),f=n(7),b=n.n(f),h=n(45),v=new(n.n(h).a),k=n(46),E=n.n(k),g=[[0,0],[Math.round(1199.2),Math.round(885.6)]];var j=r.a.memo((function(e){var t=e.onMapClick,n=e.markers,a=e.newMarkerPosition;return r.a.createElement(s.a,{id:"map",crs:b.a.CRS.Simple,maxZoom:24,zoom:0,center:[700,400],style:{height:"100vh",width:"50vw"},onClick:t},r.a.createElement(m.a,{url:E.a,bounds:g}),n.map((function(e){return r.a.createElement(d.a,{key:e.id,position:e.position},r.a.createElement(p.a,null,r.a.createElement("div",{dangerouslySetInnerHTML:{__html:v.render(e.description)}})))})),r.a.createElement(d.a,{opacity:a?1:0,position:a||[-1e4,-1e3]}))})),w=n(27),y=n.n(w);var O=r.a.memo((function(e){var t=e.onSubmit,n=e.onClear,c=Object(a.useState)(""),l=Object(u.a)(c,2),o=l[0],i=l[1],s=Object(a.useCallback)((function(e){var t=e.text;i(t)}),[]);return r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement("button",{className:"btn-back",onClick:n},"Back"),r.a.createElement("h2",null,"New Marker: ")),r.a.createElement(y.a,{value:"",renderHTML:function(e){return v.render(e)},onChange:s}),r.a.createElement("button",{className:"btn-new-marker",onClick:function(){return t({newMarkerDescription:o})}},"Add New Marker"))}));var x=r.a.memo((function(e){var t=e.markers,n=e.onDelete,c=e.onEdit,l=Object(a.useState)(null),i=Object(u.a)(l,2),s=i[0],m=i[1],d=Object(a.useState)(null),p=Object(u.a)(d,2),f=p[0],b=p[1],h=Object(a.useState)(""),k=Object(u.a)(h,2),E=k[0],g=k[1],j=function(e){return function(){n(e)}},w=function(e){return function(){c(e),b(null)}},O=t.filter((function(e){return e.description.toLowerCase().includes(E.toLowerCase())}));return r.a.createElement("div",null,r.a.createElement("h2",null,"All Markers: "),r.a.createElement("div",{id:"search"},r.a.createElement("h4",null,"Search: "),r.a.createElement("input",{type:"text",value:E,onChange:function(e){return g(e.target.value)}}),E&&r.a.createElement("button",{className:"btn-dlt",onClick:function(){return g("")}},"X")),r.a.createElement("div",{className:"card-wrapper"},null!==s&&r.a.createElement("style",{dangerouslySetInnerHTML:{__html:"\n            .leaflet-marker-icon:nth-child(".concat(s+2,") {\n              filter:  hue-rotate(425deg)\n            }\n          ")}}),O.map((function(e,t){var n=f&&f.id===e.id;return r.a.createElement("div",{key:e.id,className:"marker-card",onMouseEnter:function(){m(t)},onMouseLeave:function(){m(null)}},r.a.createElement("div",null,n?r.a.createElement(y.a,{value:f.description,renderHTML:function(e){return v.render(e)},onChange:function(e){var t=e.text;b(Object(o.a)({},f,{description:t}))}}):r.a.createElement("div",{dangerouslySetInnerHTML:{__html:v.render(e.description)}})),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",marginLeft:"10px"}},r.a.createElement("div",null,r.a.createElement("button",{style:{width:"100%",margin:0,marginBottom:"5px"},className:"btn-dlt btn-delete",onClick:j(e)},"Delete"),r.a.createElement("button",{style:{width:"100%",margin:0},className:"btn-dlt",onClick:function(){b(n?null:e)}},n?"Back":"Edit")),n&&r.a.createElement("button",{style:{width:"100%",margin:0},className:"btn-dlt btn-update",onClick:w(f)},"Update")))})),0===O.length&&r.a.createElement("h2",null,"No such markers")))})),C=n(29),S=n(48),M=C.initializeApp({apiKey:"AIzaSyBNrkxhhSw5vp2y9GSVttLGVvDkHeM3SHo",authDomain:"temasultera-map.firebaseapp.com",databaseURL:"https://temasultera-map.firebaseio.com",projectId:"temasultera-map",storageBucket:"temasultera-map.appspot.com",messagingSenderId:"462358138074",appId:"1:462358138074:web:3eddc8459297802250a9e3",measurementId:"G-MZHMBVM0RB"}).auth(),L={googleProvider:new C.auth.GoogleAuthProvider},N=Object(S.a)({providers:L,firebaseAppAuth:M}),D=C.firestore();var I=N(r.a.memo((function(e){var t=e.loading,n=e.user,a=e.signOut,c=e.signInWithGoogle;return r.a.createElement("div",null,t&&r.a.createElement("h2",null,"Loading.."),n?r.a.createElement("h1",null,"Hello, ",n.displayName):r.a.createElement("h1",null,"Log in"),n?r.a.createElement("button",{onClick:a},"Sign out"):r.a.createElement("button",{onClick:c},"Sign in with Google"))}))),A=n(49),H=n(13),B=n.n(H),R=n(18),_=function(){var e=Object(R.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.collection("markers").add(t);case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(R.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.collection("markers").doc(t).delete();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(R.a)(B.a.mark((function e(){var t,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.collection("markers").get();case 3:return t=e.sent,n=[],t.forEach((function(e){var t=e.data();n.push(Object(o.a)({fid:e.id},t))})),console.log("MARKERS: ",n),e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),alert(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(R.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fid,a=Object(A.a)(t,["fid"]),e.prev=1,e.next=4,D.collection("markers").doc(n).update(a);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),z=[{title:"Markers",tab:"markers"},{title:"Sign in",tab:"sign_in"}];var K=N((function(e){var t=e.loading,n=e.user,c=Object(a.useState)(z[0].tab),l=Object(u.a)(c,2),s=l[0],m=l[1],d=Object(a.useState)([]),p=Object(u.a)(d,2),f=p[0],b=p[1],h=Object(a.useState)(null),v=Object(u.a)(h,2),k=v[0],E=v[1];Object(a.useEffect)((function(){var e=D.collection("markers").onSnapshot((function(e){var t=function(e){try{var t=[];return e.forEach((function(e){var n=e.data();t.push(Object(o.a)({fid:e.id},n))})),console.log("MARKERS: ",t),t}catch(n){console.error(n),alert(n)}}(e);b(t)}),(function(e){console.error(e)}));return function(){e()}}),[]),n||s===z[1].tab||m(z[1].tab);var g=Object(a.useCallback)((function(e){E(e.latlng)}),[]),w=Object(a.useCallback)((function(){E(null)}),[]),y=Object(a.useCallback)((function(e){var t=e.newMarkerDescription,n={id:Date.now(),description:t,position:k};b([].concat(Object(i.a)(f),[n])),E(null);var a=Object(o.a)({},n,{position:[k.lat,k.lng]});_(a).then(T).then(b)}),[f,k]),C=Object(a.useCallback)((function(e){window.confirm("Do you really want to delete this marker?")&&G(e.fid).then(T).then(b)}),[]),S=Object(a.useCallback)((function(e){P(e).then(T).then(b)}),[]);return t?r.a.createElement("h2",null,"Loading..."):r.a.createElement("div",null,r.a.createElement(j,{onMapClick:g,markers:f,newMarkerPosition:k}),r.a.createElement("div",{id:"panel"},r.a.createElement("div",{style:{display:"flex"}},z.map((function(e){return r.a.createElement("button",{key:e.tab,onClick:function(){m(e.tab),E(null)}},e.title)}))),n&&k&&r.a.createElement(O,{onSubmit:y,onClear:w}),!k&&s===z[0].tab&&r.a.createElement(x,{markers:f,onDelete:C,onEdit:S}),!k&&s===z[1].tab&&r.a.createElement(I,null)))}));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K,null)),document.getElementById("root"))},46:function(e,t,n){e.exports=n.p+"static/media/map.490c8a8d.jpg"},51:function(e,t,n){e.exports=n(130)},56:function(e,t,n){}},[[51,1,2]]]);
//# sourceMappingURL=main.357f4f0d.chunk.js.map